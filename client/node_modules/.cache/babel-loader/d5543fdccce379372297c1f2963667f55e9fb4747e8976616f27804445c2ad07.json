{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from '../../utils/axios';\nconst initialState = {\n  user: null,\n  token: null,\n  isLoading: null,\n  status: null\n};\nexport const registerUser = createAsyncThunk('auth/registerUser', async ({\n  email,\n  password,\n  fullName,\n  city\n}) => {\n  try {\n    const {\n      data\n    } = await axios.post('/auth/register', {\n      email,\n      password,\n      fullName,\n      city\n    }, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    if (data.token) {\n      window.localStorage.setItem('token', data.token);\n    }\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const loginUser = createAsyncThunk('auth/loginUser', async ({\n  email,\n  password\n}) => {\n  try {\n    const {\n      data\n    } = await axios.post('auth/login', {\n      email,\n      password\n    });\n    if (data.token) {\n      window.localStorage.setItem('token', data.token);\n    }\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\n\n// export const loginUser = createAsyncThunk(\n//     'login/loginUser',\n//     async ({ email, password }) => {\n//         try {\n//             const { data } = await axios.post('/auth/login', {\n//                 email,\n//                 password,\n//             });\n\n//             if(data.token) {\n//                 window.localStorage.setItem('token', data.token);\n//             }\n\n//             return data;\n//         } catch (error) {\n//             console.log(error);\n//         }\n//     }\n// );\n\nexport const getMe = createAsyncThunk('auth/loginUser', async () => {\n  try {\n    const {\n      data\n    } = await axios.get('/auth/me');\n    return data;\n  } catch (error) {\n    console.log(`error is ${error}`);\n  }\n});\nexport const editUserProfile = updatedProfile => async dispatch => {\n  try {\n    const response = await axios.put('auth/', updatedProfile);\n    dispatch({\n      type: 'EDIT_PROFILE_SUCCESS',\n      payload: response.data\n    });\n  } catch (error) {\n    console.error('Error:', error);\n    dispatch({\n      type: 'EDIT_PROFILE_ERROR',\n      payload: error.message\n    });\n  }\n};\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    logOut: state => {\n      state.user = null;\n      state.token = null;\n      state.isLoading = null;\n      state.status = null;\n    }\n  },\n  extraReducers: {\n    [registerUser.pending]: state => {\n      state.isLoading = true;\n      state.status = null;\n    },\n    [registerUser.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.status = action.payload.message;\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n    },\n    [registerUser.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.status = action.payload.message;\n    },\n    [loginUser.pending]: state => {\n      state.isLoading = true;\n      state.status = null;\n    },\n    [loginUser.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.status = action.payload.message;\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n    },\n    [loginUser.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.status = action.payload.message;\n    },\n    [getMe.pending]: state => {\n      state.isLoading = true;\n      state.status = null;\n    },\n    [getMe.fulfilled]: (state, action) => {\n      var _action$payload, _action$payload2;\n      state.isLoading = false;\n      state.status = null;\n      state.user = (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.user;\n      state.token = (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.token;\n    },\n    [getMe.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.status = action.payload ? action.payload.message : \"Error occurred\";\n    },\n    [editUserProfile.pending]: state => {\n      state.isLoading = true;\n      state.status = null;\n    },\n    [editUserProfile.fulfilled]: (state, action) => {\n      var _action$payload3, _action$payload4;\n      state.isLoading = false;\n      state.status = null;\n      state.user = (_action$payload3 = action.payload) === null || _action$payload3 === void 0 ? void 0 : _action$payload3.user;\n      state.token = (_action$payload4 = action.payload) === null || _action$payload4 === void 0 ? void 0 : _action$payload4.token;\n    },\n    [editUserProfile.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.status = action.payload ? action.payload.message : \"Error occurred\";\n    }\n  }\n});\nexport const checkIsAuth = state => Boolean(state.auth.token);\nexport const {\n  logOut\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","initialState","user","token","isLoading","status","registerUser","email","password","fullName","city","data","post","headers","window","localStorage","setItem","error","console","log","loginUser","getMe","get","editUserProfile","updatedProfile","dispatch","response","put","type","payload","message","authSlice","name","reducers","logOut","state","extraReducers","pending","fulfilled","action","rejected","_action$payload","_action$payload2","_action$payload3","_action$payload4","checkIsAuth","Boolean","auth","actions","reducer"],"sources":["C:/Users/pc/Desktop/Content/WEB/Learn projects/MERN/stp/client/src/redux/features/authSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport axios from '../../utils/axios';\r\n\r\nconst initialState = {\r\n    user: null,\r\n    token: null,\r\n    isLoading: null,\r\n    status: null,\r\n};\r\n\r\nexport const registerUser = createAsyncThunk(\r\n    'auth/registerUser',\r\n    async ({ email, password, fullName, city }) => {\r\n        try {\r\n            const { data } = await axios.post('/auth/register', {\r\n                email,\r\n                password,\r\n                fullName,\r\n                city\r\n            }, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                }\r\n            });\r\n\r\n            if (data.token) {\r\n                window.localStorage.setItem('token', data.token);\r\n            }\r\n\r\n            return data;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n);\r\n\r\nexport const loginUser = createAsyncThunk(\r\n    'auth/loginUser',\r\n    async ({ email, password }) => {\r\n        try {\r\n            const { data } = await axios.post('auth/login', {\r\n                email,\r\n                password,\r\n            });\r\n\r\n            if (data.token) {\r\n                window.localStorage.setItem('token', data.token);\r\n            }\r\n\r\n            return data;\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n);\r\n\r\n// export const loginUser = createAsyncThunk(\r\n//     'login/loginUser',\r\n//     async ({ email, password }) => {\r\n//         try {\r\n//             const { data } = await axios.post('/auth/login', {\r\n//                 email,\r\n//                 password,\r\n//             });\r\n\r\n//             if(data.token) {\r\n//                 window.localStorage.setItem('token', data.token);\r\n//             }\r\n\r\n//             return data;\r\n//         } catch (error) {\r\n//             console.log(error);\r\n//         }\r\n//     }\r\n// );\r\n\r\nexport const getMe = createAsyncThunk(\r\n    'auth/loginUser',\r\n    async () => {\r\n        try {\r\n            const { data } = await axios.get('/auth/me');\r\n            return data;\r\n        } catch (error) {\r\n            console.log(`error is ${error}`);\r\n        }\r\n    }\r\n)\r\n\r\nexport const editUserProfile = (updatedProfile) => async (dispatch) => {\r\n    try {\r\n        const response = await axios.put('auth/', updatedProfile);\r\n\r\n        dispatch({ type: 'EDIT_PROFILE_SUCCESS', payload: response.data });\r\n    } catch (error) {\r\n        console.error('Error:', error);\r\n        dispatch({ type: 'EDIT_PROFILE_ERROR', payload: error.message });\r\n    }\r\n};\r\n\r\n\r\nexport const authSlice = createSlice({\r\n    name: 'auth',\r\n    initialState,\r\n    reducers: {\r\n        logOut: state => {\r\n            state.user = null;\r\n            state.token = null;\r\n            state.isLoading = null;\r\n            state.status = null;\r\n        },\r\n    },\r\n    extraReducers: {\r\n        [registerUser.pending]: state => {\r\n            state.isLoading = true;\r\n            state.status = null;\r\n        },\r\n        [registerUser.fulfilled]: (state, action) => {\r\n            state.isLoading = false;\r\n\r\n            state.status = action.payload.message;\r\n            state.user = action.payload.user;\r\n            state.token = action.payload.token;\r\n        },\r\n\r\n        [registerUser.rejected]: (state, action) => {\r\n            state.isLoading = false;\r\n            state.status = action.payload.message;\r\n        },\r\n\r\n\r\n        [loginUser.pending]: state => {\r\n            state.isLoading = true;\r\n            state.status = null;\r\n        },\r\n        [loginUser.fulfilled]: (state, action) => {\r\n            state.isLoading = false;\r\n            state.status = action.payload.message;\r\n            state.user = action.payload.user;\r\n            state.token = action.payload.token;\r\n        },\r\n        [loginUser.rejected]: (state, action) => {\r\n            state.isLoading = false;\r\n            state.status = action.payload.message;\r\n        },\r\n\r\n        [getMe.pending]: state => {\r\n            state.isLoading = true;\r\n            state.status = null;\r\n        },\r\n        [getMe.fulfilled]: (state, action) => {\r\n            state.isLoading = false;\r\n            state.status = null;\r\n            state.user = action.payload?.user;\r\n            state.token = action.payload?.token;\r\n        },\r\n        [getMe.rejected]: (state, action) => {\r\n            state.isLoading = false;\r\n            state.status = action.payload ? action.payload.message : \"Error occurred\";\r\n        },\r\n\r\n        [editUserProfile.pending]: state => {\r\n            state.isLoading = true;\r\n            state.status = null;\r\n        },\r\n        [editUserProfile.fulfilled]: (state, action) => {\r\n            state.isLoading = false;\r\n            state.status = null;\r\n            state.user = action.payload?.user;\r\n            state.token = action.payload?.token;\r\n        },\r\n        [editUserProfile.rejected]: (state, action) => {\r\n            state.isLoading = false;\r\n            state.status = action.payload ? action.payload.message : \"Error occurred\";\r\n        }\r\n    }\r\n});\r\n\r\nexport const checkIsAuth = state => Boolean(state.auth.token);\r\n\r\nexport const { logOut } = authSlice.actions;\r\nexport default authSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}