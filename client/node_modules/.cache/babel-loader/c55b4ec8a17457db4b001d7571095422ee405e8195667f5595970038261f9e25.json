{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from '../../utils/axios';\nconst initialState = {\n  markers: [],\n  currentMarkers: [],\n  loading: false\n};\nexport const createMarker = createAsyncThunk('markers/createMarker', async params => {\n  try {\n    const {\n      data\n    } = await axios.post('/markers', params);\n    console.log('data from redux', data);\n    return data;\n  } catch (error) {\n    console.error('Ошибка при создании маркера:', error);\n  }\n});\nexport const getAllMarkers = createAsyncThunk('markers/getAllMarkers', async () => {\n  try {\n    const {\n      data\n    } = await axios.get('/markers');\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const removeMarker = createAsyncThunk('markers/removeMarker', async id => {\n  try {\n    const {\n      data\n    } = await axios.delete(`/markers/${id}`, id);\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const markerSlice = createSlice({\n  name: 'markers',\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [createMarker.pending]: state => {\n      state.loading = true;\n    },\n    [createMarker.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.markers.push(action.payload);\n    },\n    [createMarker.rejected]: state => {\n      state.loading = false;\n    },\n    [getAllMarkers.pending]: state => {\n      state.loading = true;\n    },\n    [getAllMarkers.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.markers = action.payload.markers;\n      state.currentMarkers = action.payload.currentMarkers;\n    },\n    [getAllMarkers.rejected]: state => {\n      state.loading = false;\n    },\n    [removeMarker.pending]: state => {\n      state.loading = true;\n    },\n    [removeMarker.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.markers = state.markers.filter(marker => marker._id !== action.payload._id);\n    }\n  }\n});\nexport default markerSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","initialState","markers","currentMarkers","loading","createMarker","params","data","post","console","log","error","getAllMarkers","get","removeMarker","id","delete","markerSlice","name","reducers","extraReducers","pending","state","fulfilled","action","push","payload","rejected","filter","marker","_id","reducer"],"sources":["C:/Users/pc/Desktop/Content/WEB/Learn projects/MERN/stp/client/src/redux/features/markerSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport axios from '../../utils/axios';\r\n\r\nconst initialState = {\r\n  markers: [],\r\n  currentMarkers: [],\r\n  loading: false,\r\n};\r\n\r\nexport const createMarker = createAsyncThunk(\r\n  'markers/createMarker',\r\n  async params => {\r\n    try {\r\n      const { data } = await axios.post('/markers', params);\r\n        console.log('data from redux', data);\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Ошибка при создании маркера:', error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const getAllMarkers = createAsyncThunk(\r\n  'markers/getAllMarkers',\r\n  async () => {\r\n    try {\r\n      const { data } = await axios.get('/markers');\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const removeMarker = createAsyncThunk(\r\n  'markers/removeMarker',\r\n  async id => {\r\n    try {\r\n      const { data } = await axios.delete(`/markers/${id}`, id);\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const markerSlice = createSlice({\r\n  name: 'markers',\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: {\r\n    [createMarker.pending]: state => {\r\n      state.loading = true;\r\n    },\r\n    [createMarker.fulfilled]: (state, action) => {\r\n      state.loading = false;\r\n      state.markers.push(action.payload);\r\n    },\r\n    [createMarker.rejected]: state => {\r\n      state.loading = false;\r\n    },\r\n\r\n    [getAllMarkers.pending]: state => {\r\n      state.loading = true;\r\n    },\r\n    [getAllMarkers.fulfilled]: (state, action) => {\r\n      state.loading = false;\r\n      state.markers = action.payload.markers;\r\n      state.currentMarkers = action.payload.currentMarkers;\r\n    },\r\n    [getAllMarkers.rejected]: state => {\r\n      state.loading = false;\r\n    },\r\n\r\n    [removeMarker.pending]: state => {\r\n      state.loading = true;\r\n    },\r\n    [removeMarker.fulfilled]: (state, action) => {\r\n      state.loading = false;\r\n      state.markers = state.markers.filter(\r\n        marker => marker._id !== action.payload._id\r\n      );\r\n    },\r\n  },\r\n});\r\n\r\nexport default markerSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}