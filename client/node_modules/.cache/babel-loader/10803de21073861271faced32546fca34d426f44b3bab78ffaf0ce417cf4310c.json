{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from '../../utils/axios';\nconst initialState = {\n  user: null,\n  token: null,\n  isLoading: null,\n  status: null\n};\nexport const registerUser = createAsyncThunk('auth/registerUser', async ({\n  email,\n  password,\n  fullName,\n  city\n}) => {\n  try {\n    const {\n      data\n    } = await axios.post('/auth/register', {\n      email,\n      password,\n      fullName,\n      city\n    });\n    if (data.token) {\n      window.localStorage.setItem('token', data.token);\n    }\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const loginUser = createAsyncThunk('auth/loginUser', async ({\n  email,\n  password\n}) => {\n  try {\n    const {\n      data\n    } = await axios.post('/auth/login', {\n      email,\n      password\n    });\n    if (data.token) {\n      window.localStorage.setItem('token', data.token);\n    }\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\n\n// export const loginUser = createAsyncThunk(\n//     'login/loginUser',\n//     async ({ email, password }) => {\n//         try {\n//             const { data } = await axios.post('/auth/login', {\n//                 email,\n//                 password,\n//             });\n\n//             if(data.token) {\n//                 window.localStorage.setItem('token', data.token);\n//             }\n\n//             return data;\n//         } catch (error) {\n//             console.log(error);\n//         }\n//     }\n// );\n\nexport const getMe = createAsyncThunk('auth/loginUser', async () => {\n  try {\n    const {\n      data\n    } = await axios.get('/auth/me');\n    return data;\n  } catch (error) {\n    console.log(`error is ${error}`);\n  }\n});\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    logOut: state => {\n      state.user = null;\n      state.token = null;\n      state.isLoading = null;\n      state.status = null;\n    }\n  },\n  extraReducers: {\n    [registerUser.pending]: state => {\n      state.isLoading = true;\n      state.status = null;\n    },\n    [registerUser.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.status = action.payload.message;\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n    },\n    [registerUser.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.status = action.payload.message;\n    },\n    [loginUser.pending]: state => {\n      state.isLoading = true;\n      state.status = null;\n    },\n    [loginUser.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.status = action.payload.message;\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n    },\n    [loginUser.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.status = action.payload.message;\n    },\n    [getMe.pending]: state => {\n      state.isLoading = true;\n      state.status = null;\n    },\n    [getMe.fulfilled]: (state, action) => {\n      var _action$payload, _action$payload2;\n      state.isLoading = false;\n      state.status = null;\n      state.user = (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.user;\n      state.token = (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.token;\n    },\n    [getMe.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.status = action.payload ? action.payload.message : \"Error occurred\";\n    }\n  }\n});\nexport const checkIsAuth = state => Boolean(state.auth.token);\nexport const {\n  logOut\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","initialState","user","token","isLoading","status","registerUser","email","password","fullName","city","data","post","window","localStorage","setItem","error","console","log","loginUser","getMe","get","authSlice","name","reducers","logOut","state","extraReducers","pending","fulfilled","action","payload","message","rejected","_action$payload","_action$payload2","checkIsAuth","Boolean","auth","actions","reducer"],"sources":["C:/Users/pc/Desktop/Content/WEB/Learn projects/MERN/stp/client/src/redux/features/authSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport axios from '../../utils/axios';\r\n\r\nconst initialState = {\r\n    user: null,\r\n    token: null,\r\n    isLoading: null,\r\n    status: null,\r\n};\r\n\r\nexport const registerUser = createAsyncThunk(\r\n    'auth/registerUser',\r\n    async ({ email, password, fullName, city }) => {\r\n        try {\r\n            const {data} = await axios.post('/auth/register', {\r\n                email,\r\n                password,\r\n                fullName,\r\n                city\r\n            });\r\n\r\n            if(data.token) {\r\n                window.localStorage.setItem('token', data.token);\r\n            }\r\n\r\n            return data;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n);\r\n\r\nexport const loginUser = createAsyncThunk(\r\n    'auth/loginUser',\r\n    async ({ email, password }) => {\r\n      try {\r\n        const { data } = await axios.post('/auth/login', {\r\n          email,\r\n          password,\r\n        });\r\n\r\n        if (data.token) {\r\n          window.localStorage.setItem('token', data.token);\r\n        }\r\n\r\n        return data;\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    }\r\n  );\r\n\r\n// export const loginUser = createAsyncThunk(\r\n//     'login/loginUser',\r\n//     async ({ email, password }) => {\r\n//         try {\r\n//             const { data } = await axios.post('/auth/login', {\r\n//                 email,\r\n//                 password,\r\n//             });\r\n\r\n//             if(data.token) {\r\n//                 window.localStorage.setItem('token', data.token);\r\n//             }\r\n            \r\n//             return data;\r\n//         } catch (error) {\r\n//             console.log(error);\r\n//         }\r\n//     }\r\n// );\r\n\r\nexport const getMe = createAsyncThunk(\r\n    'auth/loginUser',\r\n    async () => {\r\n        try {\r\n            const { data } = await axios.get('/auth/me');\r\n            return data;\r\n        } catch (error) {\r\n            console.log(`error is ${error}`);\r\n        }\r\n    }\r\n)\r\n\r\nexport const authSlice = createSlice({\r\n    name: 'auth',\r\n    initialState, \r\n    reducers: {\r\n        logOut: state => {\r\n            state.user = null;\r\n            state.token = null;\r\n            state.isLoading = null;\r\n            state.status = null;\r\n        },\r\n    },\r\n    extraReducers: {\r\n        [registerUser.pending]: state => {\r\n            state.isLoading = true;\r\n            state.status = null;\r\n        },\r\n        [registerUser.fulfilled]: (state, action) => {\r\n            state.isLoading = false;\r\n\r\n            state.status = action.payload.message;\r\n            state.user = action.payload.user;\r\n            state.token = action.payload.token;\r\n        },\r\n\r\n        [registerUser.rejected]: (state, action) => {\r\n            state.isLoading = false;\r\n            state.status = action.payload.message;\r\n        },\r\n\r\n\r\n        [loginUser.pending]: state => {\r\n            state.isLoading = true;\r\n            state.status = null;\r\n        },\r\n        [loginUser.fulfilled]: (state, action) => {\r\n            state.isLoading = false;\r\n            state.status = action.payload.message;\r\n                state.user = action.payload.user;\r\n                state.token = action.payload.token;\r\n        },\r\n        [loginUser.rejected]: (state, action) => {\r\n            state.isLoading = false;\r\n            state.status = action.payload.message;\r\n        },\r\n\r\n        [getMe.pending]: state => {\r\n            state.isLoading = true;\r\n            state.status = null;\r\n        },\r\n        [getMe.fulfilled]: (state ,action)=>{\r\n            state.isLoading = false;\r\n            state.status = null;\r\n            state.user = action.payload?.user;\r\n            state.token = action.payload?.token;\r\n        },\r\n        [getMe.rejected]: (state, action) => {\r\n            state.isLoading = false;\r\n            state.status = action.payload ? action.payload.message : \"Error occurred\";\r\n        }\r\n    }\r\n});\r\n\r\nexport const checkIsAuth = state => Boolean(state.auth.token);\r\n\r\nexport const { logOut } = authSlice.actions;\r\nexport default authSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}