{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from '../../utils/axios';\nconst initialState = {\n  markers: [{\n    name: 'Труп человека',\n    category: 'Убийство',\n    description: 'Труп человека найден у кафе',\n    position: [44.0518889, 43.1644363],\n    id: 1\n  }, {\n    name: '2 машины в хлам',\n    category: 'Авария',\n    description: 'да я хз, проезжал мимо, увидел 2 разбитые машины',\n    position: [44.2518889, 43.2644363],\n    id: 2\n  }, {\n    name: 'Пропала сумка',\n    category: 'Кража',\n    description: 'Наверняка какой-то цыган спёр!!!',\n    position: [44.3518889, 43.3644363],\n    id: 3\n  }],\n  currentMarkers: [],\n  loading: false\n};\nexport const createMarker = createAsyncThunk('marker/createMarker', async params => {\n  try {\n    const {\n      data\n    } = await axios.put('/markers', params);\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const getAllMarkers = createAsyncThunk('marker/getAllMarkers', async () => {\n  try {\n    const {\n      data\n    } = await axios.get('/markers');\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const removeMarker = createAsyncThunk('marker/removeMarker', async id => {\n  try {\n    const {\n      data\n    } = await axios.delete(`/markers/${id}`, id);\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const markerSlice = createSlice({\n  name: 'markers',\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [createMarker.pending]: state => {\n      state.loading = true;\n    },\n    [createMarker.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.markers.push(action.payload);\n      // state.currentMarkers.push(action.payload);\n    },\n\n    [createMarker.rejected]: state => {\n      state.loading = false;\n    },\n    [getAllMarkers.pending]: state => {\n      state.loading = true;\n    },\n    [getAllMarkers.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.markers = action.payload.markers;\n      state.currentMarkers = action.payload.currentMarkers;\n    },\n    [getAllMarkers.rejected]: state => {\n      state.loading = false;\n    },\n    [removeMarker.pending]: state => {\n      state.loading = true;\n    },\n    [removeMarker.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.markers = state.markers.filter(post => post._id !== action.payload._id);\n    }\n  }\n});\nexport default markerSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","initialState","markers","name","category","description","position","id","currentMarkers","loading","createMarker","params","data","put","error","console","log","getAllMarkers","get","removeMarker","delete","markerSlice","reducers","extraReducers","pending","state","fulfilled","action","push","payload","rejected","filter","post","_id","reducer"],"sources":["C:/Users/pc/Desktop/Content/WEB/Learn projects/MERN/stp/client/src/redux/features/markerSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport axios from '../../utils/axios';\r\n\r\nconst initialState = {\r\n    markers: [\r\n        {\r\n            name: 'Труп человека',\r\n            category: 'Убийство',\r\n            description: 'Труп человека найден у кафе',\r\n            position: [44.0518889, 43.1644363],\r\n            id: 1,\r\n        },\r\n        {\r\n            name: '2 машины в хлам',\r\n            category: 'Авария',\r\n            description: 'да я хз, проезжал мимо, увидел 2 разбитые машины',\r\n            position: [44.2518889, 43.2644363],\r\n            id: 2,\r\n        },\r\n        {\r\n            name: 'Пропала сумка',\r\n            category: 'Кража',\r\n            description: 'Наверняка какой-то цыган спёр!!!',\r\n            position: [44.3518889, 43.3644363],\r\n            id: 3,\r\n        },\r\n    ],\r\n    currentMarkers: [],\r\n    loading: false,\r\n};\r\n\r\nexport const createMarker = createAsyncThunk(\r\n    'marker/createMarker',\r\n    async params => {\r\n        try {\r\n            const { data } = await axios.put('/markers', params);\r\n            return data;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n);\r\n\r\nexport const getAllMarkers = createAsyncThunk(\r\n    'marker/getAllMarkers',\r\n    async () => {\r\n        try {\r\n            const { data } = await axios.get('/markers');\r\n            return data;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n);\r\n\r\nexport const removeMarker = createAsyncThunk(\r\n    'marker/removeMarker',\r\n    async id => {\r\n        try {\r\n            const { data } = await axios.delete(`/markers/${id}`, id);\r\n            return data;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n);\r\n\r\nexport const markerSlice = createSlice({\r\n    name: 'markers',\r\n    initialState,\r\n    reducers: {},\r\n    extraReducers: {\r\n        [createMarker.pending]: (state) => {\r\n            state.loading = true\r\n        },\r\n        [createMarker.fulfilled]: (state, action) => {\r\n            state.loading = false;\r\n            state.markers.push(action.payload);\r\n            // state.currentMarkers.push(action.payload);\r\n        },\r\n        [createMarker.rejected]: (state) => {\r\n            state.loading = false\r\n        },\r\n\r\n        [getAllMarkers.pending]: (state) => {\r\n            state.loading = true\r\n        },\r\n        [getAllMarkers.fulfilled]: (state, action) => {\r\n            state.loading = false;\r\n            state.markers = action.payload.markers;\r\n            state.currentMarkers = action.payload.currentMarkers;\r\n        },\r\n        [getAllMarkers.rejected]: (state) => {\r\n            state.loading = false;\r\n        },\r\n\r\n        [removeMarker.pending]: (state) => {\r\n            state.loading = true;\r\n        },\r\n        [removeMarker.fulfilled]: (state, action) => {\r\n            state.loading = false;\r\n            state.markers = state.markers.filter(\r\n                (post) => post._id !== action.payload._id,\r\n            )\r\n        },\r\n    },\r\n});\r\n\r\nexport default markerSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}