{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from '../../utils/axios';\nconst initialState = {\n  markers: [],\n  currentMarkers: [],\n  loading: false\n};\nexport const createMarker = createAsyncThunk('marker/createMarker', async params => {\n  try {\n    const {\n      data\n    } = await axios.put('/markers', params);\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const getAllMarkers = createAsyncThunk('marker/getAllMarkers', async () => {\n  try {\n    const {\n      data\n    } = await axios.get('/markers');\n    console.log('data', data);\n    return data.currentMarkers;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const removeMarker = createAsyncThunk('marker/removeMarker', async id => {\n  try {\n    const {\n      data\n    } = await axios.delete(`/markers/${id}`, id);\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const markerSlice = createSlice({\n  name: 'markers',\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [createMarker.pending]: state => {\n      state.loading = true;\n    },\n    [createMarker.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.markers.push(action.payload);\n      // state.currentMarkers.push(action.payload);\n    },\n\n    [createMarker.rejected]: state => {\n      state.loading = false;\n    },\n    [getAllMarkers.pending]: state => {\n      state.loading = true;\n    },\n    [getAllMarkers.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.markers = action.payload.markers;\n      state.currentMarkers = action.payload.currentMarkers;\n    },\n    [getAllMarkers.rejected]: state => {\n      state.loading = false;\n    },\n    [removeMarker.pending]: state => {\n      state.loading = true;\n    },\n    [removeMarker.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.markers = state.markers.filter(post => post._id !== action.payload._id);\n    }\n  }\n});\nexport default markerSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","initialState","markers","currentMarkers","loading","createMarker","params","data","put","error","console","log","getAllMarkers","get","removeMarker","id","delete","markerSlice","name","reducers","extraReducers","pending","state","fulfilled","action","push","payload","rejected","filter","post","_id","reducer"],"sources":["C:/Users/pc/Desktop/Content/WEB/Learn projects/MERN/stp/client/src/redux/features/markerSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport axios from '../../utils/axios';\r\n\r\nconst initialState = {\r\n    markers: [],\r\n    currentMarkers: [],\r\n    loading: false,\r\n};\r\n\r\nexport const createMarker = createAsyncThunk(\r\n    'marker/createMarker',\r\n    async params => {\r\n        try {\r\n            const { data } = await axios.put('/markers', params);\r\n            return data;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n);\r\n\r\nexport const getAllMarkers = createAsyncThunk(\r\n    'marker/getAllMarkers',\r\n    async () => {\r\n        try {\r\n            const { data } = await axios.get('/markers');\r\n            console.log('data', data)\r\n            return data.currentMarkers;\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n);\r\n\r\nexport const removeMarker = createAsyncThunk(\r\n    'marker/removeMarker',\r\n    async id => {\r\n        try {\r\n            const { data } = await axios.delete(`/markers/${id}`, id);\r\n            return data;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n);\r\n\r\nexport const markerSlice = createSlice({\r\n    name: 'markers',\r\n    initialState,\r\n    reducers: {},\r\n    extraReducers: {\r\n        [createMarker.pending]: (state) => {\r\n            state.loading = true\r\n        },\r\n        [createMarker.fulfilled]: (state, action) => {\r\n            state.loading = false;\r\n            state.markers.push(action.payload);\r\n            // state.currentMarkers.push(action.payload);\r\n        },\r\n        [createMarker.rejected]: (state) => {\r\n            state.loading = false\r\n        },\r\n\r\n        [getAllMarkers.pending]: (state) => {\r\n            state.loading = true\r\n        },\r\n        [getAllMarkers.fulfilled]: (state, action) => {\r\n            state.loading = false;\r\n            state.markers = action.payload.markers;\r\n            state.currentMarkers = action.payload.currentMarkers;\r\n        },\r\n        [getAllMarkers.rejected]: (state) => {\r\n            state.loading = false;\r\n        },\r\n\r\n        [removeMarker.pending]: (state) => {\r\n            state.loading = true;\r\n        },\r\n        [removeMarker.fulfilled]: (state, action) => {\r\n            state.loading = false;\r\n            state.markers = state.markers.filter(\r\n                (post) => post._id !== action.payload._id,\r\n            )\r\n        },\r\n    },\r\n});\r\n\r\nexport default markerSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}